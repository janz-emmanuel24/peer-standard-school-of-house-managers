{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Student Profile - {{ student.user.get_full_name|default:student.user.username }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header Section -->
    <div class="bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center">
                <a href="{% url 'students:detail' student.id %}" class="text-primary-200 hover:text-white mr-4">
                    <i class="fas fa-arrow-left text-xl"></i>
                </a>
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold mb-2">Edit Student Profile</h1>
                    <p class="text-xl text-primary-100">{{ student.user.get_full_name|default:student.user.username }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Form -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="bg-white rounded-2xl shadow-lg p-8">
            <form method="post" class="space-y-8">
                {% csrf_token %}
                
                <!-- Personal Information Section -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-user text-primary-600 mr-2"></i>
                        Personal Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="gender" class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                            <select name="gender" id="gender" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                                <option value="">Select Gender</option>
                                <option value="male" {% if student.gender == 'male' %}selected{% endif %}>Male</option>
                                <option value="female" {% if student.gender == 'female' %}selected{% endif %}>Female</option>
                                <option value="other" {% if student.gender == 'other' %}selected{% endif %}>Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="marital_status" class="block text-sm font-medium text-gray-700 mb-2">Marital Status</label>
                            <select name="marital_status" id="marital_status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                                <option value="">Select Marital Status</option>
                                <option value="single" {% if student.marital_status == 'single' %}selected{% endif %}>Single</option>
                                <option value="married" {% if student.marital_status == 'married' %}selected{% endif %}>Married</option>
                                <option value="divorced" {% if student.marital_status == 'divorced' %}selected{% endif %}>Divorced</option>
                                <option value="widowed" {% if student.marital_status == 'widowed' %}selected{% endif %}>Widowed</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact Section -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-phone text-primary-600 mr-2"></i>
                        Emergency Contact Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="emergency_contact_name" class="block text-sm font-medium text-gray-700 mb-2">Contact Name</label>
                            <input type="text" name="emergency_contact_name" id="emergency_contact_name" 
                                   value="{{ student.emergency_contact_name }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        </div>
                        
                        <div>
                            <label for="emergency_contact_phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" name="emergency_contact_phone" id="emergency_contact_phone" 
                                   value="{{ student.emergency_contact_phone }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        </div>
                        
                        <div>
                            <label for="emergency_contact_relationship" class="block text-sm font-medium text-gray-700 mb-2">Relationship</label>
                            <input type="text" name="emergency_contact_relationship" id="emergency_contact_relationship" 
                                   value="{{ student.emergency_contact_relationship }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        </div>
                    </div>
                </div>

                <!-- Education & Experience Section -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-graduation-cap text-primary-600 mr-2"></i>
                        Education & Experience
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="education_level" class="block text-sm font-medium text-gray-700 mb-2">Education Level</label>
                            <input type="text" name="education_level" id="education_level" 
                                   value="{{ student.education_level }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        </div>
                        
                        <div>
                            <label for="languages_spoken" class="block text-sm font-medium text-gray-700 mb-2">Languages Spoken</label>
                            <input type="text" name="languages_spoken" id="languages_spoken" 
                                   value="{{ student.languages_spoken }}"
                                   placeholder="e.g., English, Spanish, French"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label for="previous_experience" class="block text-sm font-medium text-gray-700 mb-2">Previous Experience</label>
                        <textarea name="previous_experience" id="previous_experience" rows="4" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">{{ student.previous_experience }}</textarea>
                    </div>
                </div>

                <!-- Skills & Medical Information Section -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-clipboard-list text-primary-600 mr-2"></i>
                        Skills & Medical Information
                    </h3>
                    <div class="space-y-6">
                        <div>
                            <label for="special_skills" class="block text-sm font-medium text-gray-700 mb-2">Special Skills</label>
                            <textarea name="special_skills" id="special_skills" rows="3" 
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">{{ student.special_skills }}</textarea>
                        </div>
                        
                        <div>
                            <label for="medical_conditions" class="block text-sm font-medium text-gray-700 mb-2">Medical Conditions</label>
                            <textarea name="medical_conditions" id="medical_conditions" rows="3" 
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">{{ student.medical_conditions }}</textarea>
                            <p class="text-sm text-gray-500 mt-1">Please list any medical conditions or allergies that may affect your work.</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200">
                    <button type="submit" class="flex-1 bg-primary-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-primary-700 transition-colors duration-200">
                        <i class="fas fa-save mr-2"></i>Save Changes
                    </button>
                    <a href="{% url 'students:detail' student.id %}" class="flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-700 transition-colors duration-200 text-center">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
